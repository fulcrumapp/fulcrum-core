{"version":3,"file":"number-utils.js","names":["MachineFormatterOptions","style","useGrouping","minimumFractionDigits","maximumFractionDigits","intl","Intl","NumberUtils","parseDouble","input","number","isNaN","localizedStringFromMachineString","machineString","allowDecimals","localeDecimalFormatter","format","localeIntegerFormatter","formatMachine","formatWithFormatter","machineFormatter","formatCurrency","currency","__formatCurrency","Locale","supportsECMA402","options","currencyDisplay","formatter","global","NumberFormat","currentLocale","string","toString","_localeDecimalFormatter","_localeIntegerFormatter","_machineFormatter"],"sources":["../../src/utils/number-utils.js"],"sourcesContent":["import Locale from './locale';\n\nconst MachineFormatterOptions = {\n  style: 'decimal',\n  useGrouping: false,\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 20\n};\n\nlet intl = null;\n\nif (typeof Intl !== 'undefined') {\n  /* eslint-disable no-undef */\n  intl = Intl;\n  /* eslint-enable no-undef */\n}\n\nexport default class NumberUtils {\n  static parseDouble(input) {\n    const number = +input;\n\n    if (number == null || isNaN(number)) {\n      return null;\n    }\n\n    return number;\n  }\n\n  static get localeDecimalFormatter() {\n    if (!this._localeDecimalFormatter && intl) {\n      this._localeDecimalFormatter = new intl.NumberFormat([], MachineFormatterOptions);\n    }\n\n    return this._localeDecimalFormatter;\n  }\n\n  static get localeIntegerFormatter() {\n    if (!this._localeIntegerFormatter && intl) {\n      this._localeIntegerFormatter = new intl.NumberFormat([], {useGrouping: false, maximumFractionDigits: 0});\n    }\n\n    return this._localeIntegerFormatter;\n  }\n\n  static get machineFormatter() {\n    if (!this._machineFormatter && intl) {\n      this._machineFormatter = new intl.NumberFormat([ 'en-US' ], MachineFormatterOptions);\n    }\n\n    return this._machineFormatter;\n  }\n\n  static localizedStringFromMachineString(machineString, allowDecimals = true) {\n    if (allowDecimals && NumberUtils.localeDecimalFormatter) {\n      return NumberUtils.localeDecimalFormatter.format(machineString);\n    } else if (NumberUtils.localeIntegerFormatter) {\n      return NumberUtils.localeIntegerFormatter.format(machineString);\n    }\n\n    return machineString;\n  }\n\n  static formatMachine(number) {\n    return NumberUtils.formatWithFormatter(NumberUtils.machineFormatter, number);\n  }\n\n  static formatCurrency(number, currency) {\n    if (number == null) {\n      return null;\n    }\n\n    return NumberUtils.__formatCurrency(number, currency);\n  }\n\n  static __formatCurrency(number, currency) {\n    if (!Locale.supportsECMA402()) {\n      return number;\n    }\n\n    const options = {\n      style: 'currency',\n      currency: currency,\n      currencyDisplay: 'symbol',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    };\n\n    const formatter = new global.Intl.NumberFormat(Locale.currentLocale(), options);\n\n    return formatter.format(number);\n  }\n\n  static formatWithFormatter(formatter, number) {\n    if (formatter != null) {\n      const string = formatter.format(number);\n\n      if (string === 'NaN') {\n        return number;\n      }\n\n      return string;\n    }\n\n    return number.toString();\n  }\n}\n"],"mappings":"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"}