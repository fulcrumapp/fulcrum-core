{"version":3,"file":"record-link-value.js","names":["RecordLinkValue","element","items","_items","item","push","RecordLinkItemValue","format","part","isEmpty","map","displayValue","id","toJSON","isEqual","value","contains","startsWith","isLessThan","length","NumberUtils","parseDouble","isGreaterThan","addRecord","record","record_id","_record","insertItem","itemIndex","index","removeItem","splice","ids","MultipleValueItem","slice","FormValue"],"sources":["../../src/values/record-link-value.js"],"sourcesContent":["import FormValue from './form-value';\nimport RecordLinkItemValue from './record-link-item-value';\nimport MultipleValueItem from './multiple-value-item';\nimport NumberUtils from '../utils/number-utils';\n\nexport default class RecordLinkValue extends FormValue {\n  constructor(element, items) {\n    super(element, items);\n\n    this._items = [];\n\n    if (items) {\n      for (const item of items) {\n        this._items.push(new RecordLinkItemValue(this, item));\n      }\n    }\n  }\n\n  get isEmpty() {\n    return this.length === 0;\n  }\n\n  get displayValue() {\n    if (this.isEmpty) {\n      return null;\n    }\n\n    if (this.length === 1) {\n      return '1 record';\n    }\n\n    return this.length + ' records';\n  }\n\n  get searchableValue() {\n    return this.displayValue;\n  }\n\n  get length() {\n    return this._items.length;\n  }\n\n  format({part = null}) {\n    if (this.isEmpty) {\n      return null;\n    }\n\n    if (part === 'titles') {\n      return this.items.map(item => item.displayValue);\n    }\n\n    return this.items.map(item => item.id);\n  }\n\n  toJSON() {\n    const items = [];\n\n    for (const item of this._items) {\n      items.push(item.toJSON());\n    }\n\n    return items;\n  }\n\n  get columnValue() {\n    if (this.isEmpty) {\n      return null;\n    }\n\n    const ids = [];\n\n    for (const item of this._items) {\n      ids.push(item.id);\n    }\n\n    return ids;\n  }\n\n  get multipleValues() {\n    const ids = [];\n\n    for (const item of this._items) {\n      ids.push(new MultipleValueItem(this.element, item.id));\n    }\n\n    return ids;\n  }\n\n  isEqual(value) {\n    return false;\n  }\n\n  contains(value) {\n    return false;\n  }\n\n  startsWith(value) {\n    return false;\n  }\n\n  isLessThan(value) {\n    return this.length < NumberUtils.parseDouble(value);\n  }\n\n  isGreaterThan(value) {\n    return this.length > NumberUtils.parseDouble(value);\n  }\n\n  get items() {\n    return this._items.slice();\n  }\n\n  addRecord(record) {\n    const item = new RecordLinkItemValue(this, {record_id: record.id});\n\n    item._record = record;\n\n    this.insertItem(item);\n  }\n\n  itemIndex(id) {\n    for (let index = 0; index < this._items.length; ++index) {\n      if (id === this._items[index].id) {\n        return index;\n      }\n    }\n\n    return -1;\n  }\n\n  insertItem(item) {\n    const index = this.itemIndex(item.id);\n\n    if (index > -1) {\n      this._items[index] = item;\n    } else {\n      this._items.push(item);\n    }\n  }\n\n  removeItem(id) {\n    const index = this.itemIndex(id);\n\n    if (index > -1) {\n      const item = this._items[index];\n\n      this._items.splice(index, 1);\n\n      return item;\n    }\n\n    return null;\n  }\n}\n"],"mappings":"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"}