{"version":3,"file":"record-link-value.js","names":["RecordLinkValue","element","items","_items","item","push","RecordLinkItemValue","format","part","isEmpty","map","displayValue","id","toJSON","isEqual","value","contains","startsWith","isLessThan","length","NumberUtils","parseDouble","isGreaterThan","addRecord","record","record_id","_record","insertItem","itemIndex","index","removeItem","splice","ids","MultipleValueItem","slice","FormValue"],"sources":["../../src/values/record-link-value.js"],"sourcesContent":["import FormValue from './form-value';\nimport RecordLinkItemValue from './record-link-item-value';\nimport MultipleValueItem from './multiple-value-item';\nimport NumberUtils from '../utils/number-utils';\n\nexport default class RecordLinkValue extends FormValue {\n  constructor(element, items) {\n    super(element, items);\n\n    this._items = [];\n\n    if (items) {\n      for (const item of items) {\n        this._items.push(new RecordLinkItemValue(this, item));\n      }\n    }\n  }\n\n  get isEmpty() {\n    return this.length === 0;\n  }\n\n  get displayValue() {\n    if (this.isEmpty) {\n      return null;\n    }\n\n    if (this.length === 1) {\n      return '1 record';\n    }\n\n    return this.length + ' records';\n  }\n\n  get searchableValue() {\n    return this.displayValue;\n  }\n\n  get length() {\n    return this._items.length;\n  }\n\n  format({part = null}) {\n    if (this.isEmpty) {\n      return null;\n    }\n\n    if (part === 'titles') {\n      return this.items.map(item => item.displayValue);\n    }\n\n    return this.items.map(item => item.id);\n  }\n\n  toJSON() {\n    const items = [];\n\n    for (const item of this._items) {\n      items.push(item.toJSON());\n    }\n\n    return items;\n  }\n\n  get columnValue() {\n    if (this.isEmpty) {\n      return null;\n    }\n\n    const ids = [];\n\n    for (const item of this._items) {\n      ids.push(item.id);\n    }\n\n    return ids;\n  }\n\n  get multipleValues() {\n    const ids = [];\n\n    for (const item of this._items) {\n      ids.push(new MultipleValueItem(this.element, item.id));\n    }\n\n    return ids;\n  }\n\n  isEqual(value) {\n    return false;\n  }\n\n  contains(value) {\n    return false;\n  }\n\n  startsWith(value) {\n    return false;\n  }\n\n  isLessThan(value) {\n    return this.length < NumberUtils.parseDouble(value);\n  }\n\n  isGreaterThan(value) {\n    return this.length > NumberUtils.parseDouble(value);\n  }\n\n  get items() {\n    return this._items.slice();\n  }\n\n  addRecord(record) {\n    const item = new RecordLinkItemValue(this, {record_id: record.id});\n\n    item._record = record;\n\n    this.insertItem(item);\n  }\n\n  itemIndex(id) {\n    for (let index = 0; index < this._items.length; ++index) {\n      if (id === this._items[index].id) {\n        return index;\n      }\n    }\n\n    return -1;\n  }\n\n  insertItem(item) {\n    const index = this.itemIndex(item.id);\n\n    if (index > -1) {\n      this._items[index] = item;\n    } else {\n      this._items.push(item);\n    }\n  }\n\n  removeItem(id) {\n    const index = this.itemIndex(id);\n\n    if (index > -1) {\n      const item = this._items[index];\n\n      this._items.splice(index, 1);\n\n      return item;\n    }\n\n    return null;\n  }\n}\n"],"mappings":"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"}