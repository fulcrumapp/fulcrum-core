{"version":3,"sources":["../../src/elements/element.js"],"names":["Element","parent","attributes","_parent","_attributes","_key","key","_type","type","_label","label","_description","description","_dataName","data_name","_defaultValue","default_value","_isRequired","required","_isHidden","hidden","_isDisabled","disabled","_defaultPreviousValue","default_previous_value","_visibleConditionsType","visible_conditions_type","_visibleConditionsBehavior","visible_conditions_behavior","_visibleConditions","visible_conditions","condition","push","Condition","_requiredConditionsType","required_conditions_type","_requiredConditions","required_conditions","_minLength","_maxLength","min_length","max_length","_overrideLabel","_overrideDescription","_overrideIsRequired","_overrideIsHidden","_overrideIsDisabled","_overrideMinLength","_overrideMaxLength","resetOverrides","isType","value","overrideLabel","overrideDescription","overrideIsRequired","overrideIsHidden","overrideIsDisabled","overrideMinLength","overrideMaxLength","minLength","maxLength","requiredConditions","length","visibleConditions","isHidden","hasHiddenParent","preserveValueWhenConditionallyHidden","isPreserved","Types","SectionElement","ChoiceElement","TextElement","DateElement","TimeElement","PhotoElement","VideoElement","AudioElement","AttachmentElement","ClassificationElement","SignatureElement","RepeatableElement","AddressElement","LabelElement","YesNoElement","HyperlinkElement","BarcodeElement","CalculatedElement","RecordLinkElement","StatusElement","CheckboxElement","DynamicElement"],"mappings":"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","sourcesContent":["import Types from './element-types';\nimport Condition from './condition';\n\nexport default class Element {\n  constructor(parent, attributes) {\n    this._parent = parent;\n\n    this._attributes = attributes;\n\n    this._key = attributes.key;\n\n    this._type = attributes.type;\n\n    this._label = attributes.label;\n\n    this._description = attributes.description;\n\n    this._dataName = attributes.data_name;\n\n    this._defaultValue = attributes.default_value;\n\n    this._isRequired = !!attributes.required;\n\n    this._isHidden = !!attributes.hidden;\n\n    this._isDisabled = !!attributes.disabled;\n\n    this._defaultPreviousValue = !!attributes.default_previous_value;\n\n    this._visibleConditionsType = attributes.visible_conditions_type;\n\n    this._visibleConditionsBehavior = attributes.visible_conditions_behavior || 'clear';\n\n    this._visibleConditions = [];\n\n    if (attributes.visible_conditions) {\n      for (const condition of attributes.visible_conditions) {\n        this._visibleConditions.push(new Condition(this, condition));\n      }\n    }\n\n    this._requiredConditionsType = attributes.required_conditions_type;\n\n    this._requiredConditions = [];\n\n    if (attributes.required_conditions) {\n      for (const condition of attributes.required_conditions) {\n        this._requiredConditions.push(new Condition(this, condition));\n      }\n    }\n\n    this._minLength = -1;\n    this._maxLength = -1;\n\n    if (attributes.min_length != null) {\n      this._minLength = +attributes.min_length;\n    }\n\n    if (attributes.max_length != null) {\n      this._maxLength = +attributes.max_length;\n    }\n\n    this._overrideLabel = null;\n    this._overrideDescription = null;\n    this._overrideIsRequired = null;\n    this._overrideIsHidden = null;\n    this._overrideIsDisabled = null;\n    this._overrideMinLength = null;\n    this._overrideMaxLength = null;\n  }\n\n  get parent() {\n    return this._parent;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  get key() {\n    return this._key;\n  }\n\n  get label() {\n    return this._overrideLabel != null ? this._overrideLabel : this._label;\n  }\n\n  get description() {\n    return this._overrideDescription != null ? this._overrideDescription : this._description;\n  }\n\n  get dataName() {\n    return this._dataName;\n  }\n\n  get defaultValue() {\n    return this._defaultValue;\n  }\n\n  get isDefaultPreviousValueEnabled() {\n    return this._defaultPreviousValue;\n  }\n\n  get isRequired() {\n    return this._overrideIsRequired != null ? this._overrideIsRequired : this._isRequired;\n  }\n\n  get isHidden() {\n    return this._overrideIsHidden != null ? this._overrideIsHidden : this._isHidden;\n  }\n\n  get isDisabled() {\n    return this._overrideIsDisabled != null ? this._overrideIsDisabled : this._isDisabled;\n  }\n\n  get visibleConditionsType() {\n    return this._visibleConditionsType;\n  }\n\n  get visibleConditions() {\n    return this._visibleConditions;\n  }\n\n  get requiredConditionsType() {\n    return this._requiredConditionsType;\n  }\n\n  get requiredConditions() {\n    return this._requiredConditions;\n  }\n\n  get minLength() {\n    return this._overrideMinLength != null ? this._overrideMinLength : this._minLength;\n  }\n\n  get maxLength() {\n    return this._overrideMaxLength != null ? this._overrideMinLength : this._maxLength;\n  }\n\n  get overrideLabel() {\n    return this._overrideLabel;\n  }\n\n  set overrideLabel(value) {\n    this._overrideLabel = value;\n  }\n\n  get overrideDescription() {\n    return this._overrideDescription;\n  }\n\n  set overrideDescription(value) {\n    this._overrideDescription = value;\n  }\n\n  get overrideIsRequired() {\n    return this._overrideIsRequired;\n  }\n\n  set overrideIsRequired(value) {\n    this._overrideIsRequired = value != null ? !!value : null;\n  }\n\n  get overrideIsHidden() {\n    return this._overrideIsHidden;\n  }\n\n  set overrideIsHidden(value) {\n    this._overrideIsHidden = value != null ? !!value : null;\n  }\n\n  get overrideIsDisabled() {\n    return this._overrideIsDisabled;\n  }\n\n  set overrideIsDisabled(value) {\n    this._overrideIsDisabled = value != null ? !!value : null;\n  }\n\n  get overrideMinLength() {\n    return this._overrideMinLength;\n  }\n\n  set overrideMinLength(value) {\n    this._overrideMinLength = value != null ? +value : null;\n  }\n\n  get overrideMaxLength() {\n    return this._overrideMaxLength;\n  }\n\n  set overrideMaxLength(value) {\n    this._overrideMaxLength = value != null ? +value : null;\n  }\n\n  get overrideValues() {\n    return {\n      overrideLabel: this._overrideLabel,\n      overrideDescription: this._overrideDescription,\n      overrideIsRequired: this._overrideIsRequired,\n      overrideIsHidden: this._overrideIsHidden,\n      overrideIsDisabled: this._overrideIsDisabled,\n      overrideMinLength: this._overrideMinLength,\n      overrideMaxLength: this._overrideMaxLength\n    };\n  }\n\n  resetOverrides() {\n    this._overrideLabel = null;\n    this._overrideDescription = null;\n    this._overrideIsRequired = null;\n    this._overrideIsHidden = null;\n    this._overrideIsDisabled = null;\n    this._overrideMinLength = null;\n    this._overrideMaxLength = null;\n  }\n\n  get isLengthValidationSupported() {\n    return false;\n  }\n\n  get hasMinLength() {\n    return this.minLength > 0;\n  }\n\n  get hasMaxLength() {\n    return this.maxLength > 0;\n  }\n\n  get hasRequiredConditions() {\n    return this.requiredConditions.length !== 0;\n  }\n\n  get hasVisibilityConditions() {\n    return this.visibleConditions.length !== 0;\n  }\n\n  get hasHiddenParent() {\n    if (this.parent == null || this.isHidden) {\n      return this.isHidden;\n    }\n    return this.parent.hasHiddenParent;\n  }\n\n  get preserveValueWhenConditionallyHidden() {\n    return this._visibleConditionsBehavior === 'preserve';\n  }\n\n  get isPreserved() {\n    if (this.parent == null || this.preserveValueWhenConditionallyHidden) {\n      return this.preserveValueWhenConditionallyHidden;\n    }\n    return this.parent.isPreserved;\n  }\n\n  isType(type) {\n    return this.type === type;\n  }\n\n  get isSectionElement() {\n    return this.isType(Types.SectionElement);\n  }\n\n  get isChoiceElement() {\n    return this.isType(Types.ChoiceElement);\n  }\n\n  get isTextElement() {\n    return this.isType(Types.TextElement);\n  }\n\n  get isDateElement() {\n    return this.isType(Types.DateElement);\n  }\n\n  get isTimeElement() {\n    return this.isType(Types.TimeElement);\n  }\n\n  get isPhotoElement() {\n    return this.isType(Types.PhotoElement);\n  }\n\n  get isVideoElement() {\n    return this.isType(Types.VideoElement);\n  }\n\n  get isAudioElement() {\n    return this.isType(Types.AudioElement);\n  }\n\n  get isAttachmentElement() {\n    return this.isType(Types.AttachmentElement);\n  }\n\n  get isClassificationElement() {\n    return this.isType(Types.ClassificationElement);\n  }\n\n  get isSignatureElement() {\n    return this.isType(Types.SignatureElement);\n  }\n\n  get isRepeatableElement() {\n    return this.isType(Types.RepeatableElement);\n  }\n\n  get isAddressElement() {\n    return this.isType(Types.AddressElement);\n  }\n\n  get isLabelElement() {\n    return this.isType(Types.LabelElement);\n  }\n\n  get isYesNoElement() {\n    return this.isType(Types.YesNoElement);\n  }\n\n  get isHyperlinkElement() {\n    return this.isType(Types.HyperlinkElement);\n  }\n\n  get isBarcodeElement() {\n    return this.isType(Types.BarcodeElement);\n  }\n\n  get isCalculatedElement() {\n    return this.isType(Types.CalculatedElement);\n  }\n\n  get isRecordLinkElement() {\n    return this.isType(Types.RecordLinkElement);\n  }\n\n  get isStatusElement() {\n    return this.isType(Types.StatusElement);\n  }\n\n  get isCheckboxElement() {\n    return this.isType(Types.CheckboxElement);\n  }\n\n  get isDynamicElement() {\n    return this.isType(Types.DynamicElement);\n  }\n}\n"],"file":"element.js"}