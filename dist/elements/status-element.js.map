{"version":3,"file":"status-element.js","names":["DEFAULT_STATUS_ELEMENT","label","key","data_name","enabled","read_only","choices","StatusElement","parent","attributes","type","attrs","Object","assign","_statusFilter","_choices","choice","push","StatusChoice","_enabled","_readOnly","statusForValue","value","resetOverrides","filteredChoices","_overrideIsDisabled","statusFilter","items","filteredItems","item","filter","toLowerCase","indexOf","getOwnPropertyDescriptor","Element","prototype","get","call","TextualElement"],"sources":["../../src/elements/status-element.js"],"sourcesContent":["import TextualElement from './textual-element';\nimport StatusChoice from './status-choice';\nimport Element from './element';\n\nconst DEFAULT_STATUS_ELEMENT = {\n  label: 'Status',\n  key: '@status',\n  data_name: 'status',\n  enabled: false,\n  read_only: false,\n  choices: []\n};\n\nexport default class StatusElement extends TextualElement {\n  constructor(parent, attributes) {\n    attributes.type = 'StatusField';\n\n    const attrs = Object.assign({}, DEFAULT_STATUS_ELEMENT, attributes);\n\n    super(parent, attrs);\n\n    this._statusFilter = null;\n\n    this._choices = [];\n\n    if (attrs.choices) {\n      for (const choice of attrs.choices) {\n        this._choices.push(new StatusChoice(choice));\n      }\n    }\n\n    this._enabled = !!attrs.enabled;\n    this._readOnly = !!attrs.read_only;\n  }\n\n  get choices() {\n    return this.filteredChoices;\n  }\n\n  get isEnabled() {\n    return this._enabled;\n  }\n\n  get isReadOnly() {\n    return this._overrideIsDisabled != null ? this._overrideIsDisabled : this._readOnly;\n  }\n\n  get statusFilter() {\n    return this._statusFilter;\n  }\n\n  set statusFilter(statusFilter) {\n    this._statusFilter = statusFilter;\n  }\n\n  statusForValue(value) {\n    for (const choice of this.choices) {\n      if (choice.value === value) {\n        return choice;\n      }\n    }\n\n    return null;\n  }\n\n  get filteredChoices() {\n    const items = this._choices;\n\n    if (!this.statusFilter) {\n      return items;\n    }\n\n    const filteredItems = [];\n\n    for (const item of items) {\n      for (const filter of this.statusFilter) {\n        if (item.value.toLowerCase().indexOf(filter.toLowerCase()) !== -1) {\n          filteredItems.push(item);\n        }\n      }\n    }\n\n    return filteredItems;\n  }\n\n  get overrideValues() {\n    return Object.assign(Object.getOwnPropertyDescriptor(Element.prototype, 'overrideValues').get.call(this), {\n      statusFilter: this._statusFilter\n    });\n  }\n\n  resetOverrides() {\n    super.resetOverrides();\n\n    this._statusFilter = null;\n  }\n}\n"],"mappings":"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"}