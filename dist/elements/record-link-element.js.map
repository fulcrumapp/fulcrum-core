{"version":3,"file":"record-link-element.js","names":["RecordLinkElement","parent","attributes","_formID","form_id","allowMultiple","allow_multiple_records","allowExisting","allow_existing_records","allowCreating","allow_creating_records","allowUpdating","allow_updating_records","recordConditionsType","record_conditions_type","recordConditions","record_conditions","condition","push","RecordLinkCondition","recordDefaults","record_defaults","def","RecordLinkDefault","load","dataSource","callback","getForm","err","form","Element"],"sources":["../../src/elements/record-link-element.js"],"sourcesContent":["import Element from './element';\nimport RecordLinkCondition from './record-link-condition';\nimport RecordLinkDefault from './record-link-default';\n\nexport default class RecordLinkElement extends Element {\n  constructor(parent, attributes) {\n    super(parent, attributes);\n\n    this._formID = attributes.form_id;\n\n    this.allowMultiple = !!attributes.allow_multiple_records;\n    this.allowExisting = !!attributes.allow_existing_records;\n    this.allowCreating = !!attributes.allow_creating_records;\n    this.allowUpdating = !!attributes.allow_updating_records;\n\n    // TODO(zhm) model these\n    this.recordConditionsType = attributes.record_conditions_type;\n\n    this.recordConditions = [];\n\n    if (attributes.record_conditions) {\n      for (const condition of attributes.record_conditions) {\n        this.recordConditions.push(new RecordLinkCondition(condition));\n      }\n    }\n\n    this.recordDefaults = [];\n\n    if (attributes.record_defaults) {\n      for (const def of attributes.record_defaults) {\n        this.recordDefaults.push(new RecordLinkDefault(def));\n      }\n    }\n  }\n\n  load(dataSource, callback) {\n    dataSource.getForm(this._formID, (err, form) => {\n      if (err) {\n        callback(err);\n        return;\n      }\n\n      // recursively load the linked forms\n      this.form = form;\n      this.form.load(dataSource, callback);\n    });\n  }\n}\n\n"],"mappings":";;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;IAEqBA,iB;;;EACnB,2BAAYC,MAAZ,EAAoBC,UAApB,EAAgC;IAAA;;IAC9B,4BAAMD,MAAN,EAAcC,UAAd;IAEA,MAAKC,OAAL,GAAeD,UAAU,CAACE,OAA1B;IAEA,MAAKC,aAAL,GAAqB,CAAC,CAACH,UAAU,CAACI,sBAAlC;IACA,MAAKC,aAAL,GAAqB,CAAC,CAACL,UAAU,CAACM,sBAAlC;IACA,MAAKC,aAAL,GAAqB,CAAC,CAACP,UAAU,CAACQ,sBAAlC;IACA,MAAKC,aAAL,GAAqB,CAAC,CAACT,UAAU,CAACU,sBAAlC,CAR8B,CAU9B;;IACA,MAAKC,oBAAL,GAA4BX,UAAU,CAACY,sBAAvC;IAEA,MAAKC,gBAAL,GAAwB,EAAxB;;IAEA,IAAIb,UAAU,CAACc,iBAAf,EAAkC;MAChC,qDAAwBd,UAAU,CAACc,iBAAnC,wCAAsD;QAAA,IAA3CC,SAA2C;;QACpD,MAAKF,gBAAL,CAAsBG,IAAtB,CAA2B,IAAIC,+BAAJ,CAAwBF,SAAxB,CAA3B;MACD;IACF;;IAED,MAAKG,cAAL,GAAsB,EAAtB;;IAEA,IAAIlB,UAAU,CAACmB,eAAf,EAAgC;MAC9B,sDAAkBnB,UAAU,CAACmB,eAA7B,2CAA8C;QAAA,IAAnCC,GAAmC;;QAC5C,MAAKF,cAAL,CAAoBF,IAApB,CAAyB,IAAIK,6BAAJ,CAAsBD,GAAtB,CAAzB;MACD;IACF;;IA3B6B;EA4B/B;;;;SAEDE,I,GAAA,cAAKC,UAAL,EAAiBC,QAAjB,EAA2B;IAAA;;IACzBD,UAAU,CAACE,OAAX,CAAmB,KAAKxB,OAAxB,EAAiC,UAACyB,GAAD,EAAMC,IAAN,EAAe;MAC9C,IAAID,GAAJ,EAAS;QACPF,QAAQ,CAACE,GAAD,CAAR;QACA;MACD,CAJ6C,CAM9C;;;MACA,MAAI,CAACC,IAAL,GAAYA,IAAZ;;MACA,MAAI,CAACA,IAAL,CAAUL,IAAV,CAAeC,UAAf,EAA2BC,QAA3B;IACD,CATD;EAUD,C;;;EA1C4CI,mB"}