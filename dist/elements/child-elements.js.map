{"version":3,"sources":["../../src/elements/child-elements.js"],"names":["ChildElements","createChildElements","elements","_elements","element","el","ElementFactory","create","push","elementsOfType","type","recurseRepeatables","result","flattenElements","_flattenElements","flat","recurse","isRepeatableElement","concat","_flattenElementsByAttribute","attr","children","Object","keys","key","_elementsJSON","_elementsByKey","_elementsByDataName","Mixin"],"mappings":"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","sourcesContent":["import Mixin from 'mixmatch';\nimport ElementFactory from './element-factory';\n\nexport default class ChildElements extends Mixin {\n  get elements() {\n    if (!this._elements) {\n      this.createChildElements(this._elementsJSON);\n    }\n\n    return this._elements;\n  }\n\n  createChildElements(elements) {\n    this._elements = [];\n\n    if (elements) {\n      for (const element of elements) {\n        const el = ElementFactory.create(this, element);\n\n        if (el) {\n          this._elements.push(el);\n        }\n      }\n    }\n  }\n\n  get allElements() {\n    return this._flattenElements(this.elements);\n  }\n\n  get elementsByKey() {\n    if (this._elementsByKey == null) {\n      this._elementsByKey = this._flattenElementsByAttribute(this.elements, 'key');\n    }\n\n    return this._elementsByKey;\n  }\n\n  get elementsByDataName() {\n    if (this._elementsByDataName == null) {\n      this._elementsByDataName = this._flattenElementsByAttribute(this.elements, 'dataName');\n    }\n\n    return this._elementsByDataName;\n  }\n\n  elementsOfType(type, recurseRepeatables = true) {\n    const result = [];\n\n    for (const element of this.flattenElements(recurseRepeatables)) {\n      if (element.type === type) {\n        result.push(element);\n      }\n    }\n\n    return result;\n  }\n\n  flattenElements(recurseRepeatables = true) {\n    return this._flattenElements(this.elements, recurseRepeatables);\n  }\n\n  _flattenElements(elements, recurseRepeatables = true) {\n    let flat = [];\n\n    for (const element of elements) {\n      flat.push(element);\n\n      let recurse = true;\n\n      if (!recurseRepeatables && element.isRepeatableElement) {\n        recurse = false;\n      }\n\n      if (recurse && element.elements) {\n        flat = flat.concat(this._flattenElements(element.elements, recurseRepeatables));\n      }\n    }\n\n    return flat;\n  }\n\n  _flattenElementsByAttribute(elements, attr) {\n    const flat = {};\n\n    for (const element of elements) {\n      flat[element[attr]] = element;\n\n      if (element.elements) {\n        const children = this._flattenElementsByAttribute(element.elements, attr);\n\n        for (const key of Object.keys(children)) {\n          flat[key] = children[key];\n        }\n      }\n    }\n\n    return flat;\n  }\n}\n"],"file":"child-elements.js"}